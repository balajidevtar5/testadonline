"use strict";(self.webpackChunkclassified_app=self.webpackChunkclassified_app||[]).push([[3],{48003:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var s=a(74848),n=a(96540),i=a(71468),r=a(68785),o=a(69462),l=a(29318),d=a(42702),c=a(68777),u=a(10871),g=a(29586),m=a(50994);const f=({userActivityColumn:e,updatedUserActivityData:t,isLoading:a,totalItems:n,handleTableChange:i,tableKey:r,userActivityPayload:o})=>(0,s.jsx)("div",Object.assign({className:"pb-20",style:{marginBottom:"70px"}},{children:(0,s.jsx)(m.A,{columns:e,dataSource:t||[],loading:a,pagination:{position:["bottomCenter"],current:o.PageNumber,pageSize:o.PageSize,total:n,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],className:"mb-16"},onChange:i,className:"overflow-y-hidden mt-60"},r)}));var y=a(38059),p=a(74353),b=a.n(p),h=a(98867),j=a.n(h),v=a(8906),S=a.n(v),x=a(13216),O=a(61652);b().extend(j()),b().extend(S());const k=()=>{const e=(0,i.wA)(),t=(0,n.useRef)(null),[a,m]=(0,n.useState)([]),p={Search:"",PageSize:10,PageNumber:1,SortColumn:"",SortDirection:""},[h,j]=(0,n.useState)(p),{data:v,isLoading:S}=(0,i.d4)((e=>e.userActivity)),{data:k}=(0,i.d4)((e=>e.loginUser)),[C,A]=(0,n.useState)(null),[N,D]=(0,n.useState)([]),[w,P]=(0,n.useState)(0),{isDarkMode:I}=(0,n.useContext)(O.M),[z,L]=(0,n.useState)(I?"#242424":"#fff"),T=(e,t,a)=>{t(),m((t=>{const s=[...t],n=s.findIndex((e=>e.key===a));n>-1?s[n].value=e[0]:s.push({key:a,value:e[0]});const i={users:"UsernameSearch",displayname:"DisplaynameSearch",location:"Location",jsondata:"JsonDataSearch"};D([]);const r=Object.assign(Object.assign({},h),{PageNumber:1});if("datestamp"===a){const[t,a]=e[0];r.FromDate=t,r.ToDate=a}return Object.keys(i).forEach((e=>{const t=s.find((t=>t.key===e));r[i[e]]=t?t.value:null})),j(r),s}))},F=(e,a=!1)=>({filterDropdown:({setSelectedKeys:n,selectedKeys:i,confirm:r,clearFilters:f,close:y})=>(0,s.jsxs)("div",Object.assign({style:{padding:8,backgroundColor:z,color:I?"#fff":"#000",border:I?"1px solid #444":"1px solid #d9d9d9"},onKeyDown:e=>e.stopPropagation(),className:"antclass"},{children:[a?(0,s.jsx)(o.A.RangePicker,{value:i[0]&&Array.isArray(i[0])&&2===i[0].length?[b()(i[0][0]),b()(i[0][1])]:[null,null],onChange:(e,t)=>{const[a,s]=t;n(a&&s?[[a,s]]:[])},className:"mobile-date-picker "+(I?"dark":""),style:{marginBottom:8,display:"block",backgroundColor:z,color:I?"#fff":"#000"}}):(0,s.jsx)(l.A,{ref:t,placeholder:`Search ${e}`,value:i[0],onChange:e=>n(e.target.value?[e.target.value.trim()]:[]),onPressEnter:()=>T(i,r,e),style:{marginBottom:8,display:"block",backgroundColor:z,color:I?"#fff":"#000"}}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(c.Ay,Object.assign({type:"primary",disabled:a?!(i[0]&&2===i[0].length):!i[0],className:`btn-primary d-flex align-items-center ${g.A.searchFilter}`,onClick:()=>T(i,r,e),icon:(0,s.jsx)(u.A,{sx:{color:"#63636370",width:"18px",height:"18px",mr:"3px"}}),size:"small",style:{width:90,backgroundColor:z,color:I?"#fff":"#000"}},{children:"Search"})),(0,s.jsx)(c.Ay,Object.assign({onClick:()=>{f&&((e,t)=>{e({confirm:!0}),m((e=>e.filter((e=>(null==e?void 0:e.key)!==t))));const a={users:"UsernameSearch",displayname:"DisplaynameSearch",location:"Location",jsondata:"JsonDataSearch",datestamp:"ActivityTimeSearch"};D([]);const s=a[t];s&&j((e=>{const t=Object.assign({},e);return delete t[s],t})),j((e=>{const s=Object.assign({},e);return delete s[a[t]],"datestamp"===t&&(delete s.FromDate,delete s.ToDate),s.PageNumber=1,s}))})(f,e),n([])},size:"small",style:{width:90,backgroundColor:z,color:I?"#fff":"#000"}},{children:"Reset"}))]})]})),filterIcon:e=>(0,s.jsx)(u.A,{sx:{color:e?"#1890ff":I?"#fff":"#63636370",border:"none",background:"transparent",width:"18px",height:"18px",mr:"3px"}}),onFilter:(t,s)=>{var n,i;if("location"===e){const a=(null==t?void 0:t.toString().trim().toLowerCase())||"";return((null===(n=s[e])||void 0===n?void 0:n.toString().trim().toLowerCase())||"").includes(a)}if(a&&Array.isArray(t)&&2===t.length){const[a,n]=t.map((e=>b()(e))),i=b()(s[e]);return i.isSameOrAfter(a.startOf("day"))&&i.isSameOrBefore(n.endOf("day"))}const r=(null==t?void 0:t.toString().trim().toLowerCase())||"";return((null===(i=s[e])||void 0===i?void 0:i.toString().trim().toLowerCase())||"").includes(r)},onFilterDropdownOpenChange:e=>{e&&setTimeout((()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.select()}),100)},render:e=>e}),K=[Object.assign({title:"User Name",dataIndex:"users",key:1,sorter:!0},F("users")),Object.assign(Object.assign({title:"Activity Name",dataIndex:"displayname",key:2},F("displayname")),{sorter:!0}),Object.assign(Object.assign({title:"Activity Time",dataIndex:"datestamp",key:3,sorter:!0},F("datestamp",!0)),{render:e=>(0,r.Kr)(e)}),Object.assign({title:"City Name",dataIndex:"location",key:4,sorter:!0},F("location")),{title:"Category",dataIndex:"category",key:5},Object.assign(Object.assign({title:"JSON Data",dataIndex:"jsondata",key:6,sorter:!0},F("jsondata")),{render:(e,t)=>{if(!t.jsondata)return null;let a=JSON.parse(t.jsondata);return(0,s.jsxs)("pre",{children:["{",Object.entries(a).map((([e,a],n,i)=>(0,s.jsxs)("div",Object.assign({style:{display:"inline"}},{children:['  "',e,'": ',"PostId"===e?(0,s.jsx)("a",Object.assign({href:t.shareposturl,target:"_blank",rel:"noopener noreferrer"},{children:String(a)})):JSON.stringify(a),n<i.length-1?",":""]}),e))),"}"]})}})];return(0,n.useEffect)((()=>{var t;k&&(null==k?void 0:k.data)&&1===(null===(t=null==k?void 0:k.data[0])||void 0===t?void 0:t.roleid)&&(D([]),e((0,y.mD)(h)))}),[h,k]),(0,n.useEffect)((()=>{var e,t;if(v&&(null==v?void 0:v.data)){A(null===(e=null==v?void 0:v.data[0])||void 0===e?void 0:e.totalcount);const a=null===(t=null==v?void 0:v.data)||void 0===t?void 0:t.map((e=>Object.assign(Object.assign({},e),{key:e.userid})));D([]),setTimeout((()=>D(a)),0)}}),[v]),(0,n.useEffect)((()=>()=>{j(p)}),[]),(0,s.jsxs)("div",Object.assign({className:"relative min-h-screen"},{children:[(0,s.jsx)("div",Object.assign({className:"pb-20"},{children:(0,s.jsx)(f,Object.assign({},{userActivityColumn:K,updatedUserActivityData:N,isLoading:S,totalItems:C,handleTableChange:(e,t,a,s)=>{const n=Object.assign(Object.assign({},h),{PageSize:e.pageSize,PageNumber:e.current});if(a&&a.field){const e="locationname"===a.field?"CityName":a.field;n.SortColumn=e,n.SortColumn=a.field,n.SortDirection=a.order?"descend"===a.order?"desc":"asc":null}else n.SortColumn=null,n.SortDirection=null;j(n)},tableKey:w,userActivityPayload:h}))})),(0,s.jsx)("div",Object.assign({className:"fixed bottom-0 left-0 right-0 z-50"},{children:(0,s.jsx)(x.A,{})}))]}))}}}]);