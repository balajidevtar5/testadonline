importScripts("https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js");const firebaseConfig={apiKey:"AIzaSyCfejHMuLX1Fon8pjMNSgb1AgPh8ys-EEo",authDomain:"adonline-84a70.firebaseapp.com",projectId:"adonline-84a70",storageBucket:"adonline-84a70.firebasestorage.app",messagingSenderId:"612453146634",appId:"1:612453146634:web:680423b16c5433614afff3",measurementId:"G-V5B4DSKC9B"};if(!firebase.apps.length)try{firebase.initializeApp(firebaseConfig)}catch(i){console.error("Error initializing Firebase in service worker:",i)}self.addEventListener("push",(function(i){if(i.data){const t=i.data.json(),e=t.notification.title||"New Notification",n={body:t.data.body||"",icon:"/512X512.svg",image:t.data.image||"/512X512.svg",data:t.data||{},tag:"notification-1"};self.clients.matchAll({type:"window",includeUncontrolled:!0}).then((i=>{i.forEach((i=>{i.postMessage({type:"NOTIFICATION_RECEIVED",payload:t})}))})),i.waitUntil(self.registration.showNotification(e,n))}})),self.addEventListener("notificationclick",(function(i){i.notification.close();const t=i?.notification?.data?.postid,e=new URL(i.notification.data.SharePostUrl||"/",self.location.origin).href,n=i?.notification?.data?.notificationId,a=clients.matchAll({type:"window",includeUncontrolled:!0}).then((i=>{for(let a=0;a<i?.length;a++){const o=i[a];if(o.url===e&&"focus"in o)return o.postMessage({type:"NOTIFICATION_CLICK",postId:t,notificationId:n}),o.focus()}if(clients.openWindow)return clients.openWindow(e).then((i=>{i&&i.postMessage({type:"NOTIFICATION_CLICK",postId:t,notificationId:n})}))}));i.waitUntil(Promise.all([a]))}));